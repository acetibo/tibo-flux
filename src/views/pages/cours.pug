extends ../layouts/layout

block content
  .text-center.mb-8
    h1.text-4xl.font-bold.text-gray-800.mb-4 Standards de Diagrammes de Flux
    p.text-xl.text-gray-600 Comprendre Flowchart, UML Activity et BPMN

  //- Navigation rapide
  .bg-white.rounded-lg.shadow-md.p-4.mb-8
    h3.font-semibold.text-gray-700.mb-3 Navigation rapide
    .flex.flex-wrap.gap-3
      a(class="bg-indigo-100 text-indigo-700 px-4 py-2 rounded hover:bg-indigo-200 transition" href="#flowchart") Flowchart
      a(class="bg-purple-100 text-purple-700 px-4 py-2 rounded hover:bg-purple-200 transition" href="#uml") UML Activity
      a(class="bg-amber-100 text-amber-700 px-4 py-2 rounded hover:bg-amber-200 transition" href="#bpmn") BPMN
      a(class="bg-green-100 text-green-700 px-4 py-2 rounded hover:bg-green-200 transition" href="#comparatif") Comparatif
      a(class="bg-cyan-100 text-cyan-700 px-4 py-2 rounded hover:bg-cyan-200 transition" href="#swimlanes") Swimlanes
      a(class="bg-blue-100 text-blue-700 px-4 py-2 rounded hover:bg-blue-200 transition" href="#tiboflux") TiboFlux
      a(class="bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-800 transition" href="#debug") Outils debug

  //- Vue d'ensemble
  .bg-white.rounded-lg.shadow-md.p-6.mb-8
    h2.text-2xl.font-bold.text-gray-800.mb-4 Vue d'ensemble
    p.text-gray-600.mb-4 Il existe 3 grands standards pour repr√©senter des flux :
    .overflow-x-auto
      table.w-full.text-left
        thead.bg-gray-100
          tr
            th.p-3.font-semibold Standard
            th.p-3.font-semibold Origine
            th.p-3.font-semibold Complexit√©
            th.p-3.font-semibold Usage principal
        tbody
          tr.border-b
            td.p-3.font-medium Flowchart
            td.p-3 ISO 5807 (1985)
            td.p-3
              span.text-yellow-500 ‚òÖ
              span.text-gray-300 ‚òÖ‚òÖ
            td.p-3 Algorithmes, processus simples
          tr.border-b
            td.p-3.font-medium UML Activity
            td.p-3 OMG (1997)
            td.p-3
              span.text-yellow-500 ‚òÖ‚òÖ
              span.text-gray-300 ‚òÖ
            td.p-3 Logique m√©tier, cas d'utilisation
          tr
            td.p-3.font-medium BPMN
            td.p-3 OMG (2004)
            td.p-3
              span.text-yellow-500 ‚òÖ‚òÖ‚òÖ
            td.p-3 Processus d'entreprise, workflows

  //- Section Flowchart
  #flowchart.bg-white.rounded-lg.shadow-md.p-6.mb-8
    .flex.items-center.gap-3.mb-4
      .text-3xl üìä
      h2.text-2xl.font-bold.text-indigo-600 1. Flowchart (ISO 5807)

    p.text-gray-600.mb-4
      | Le standard le plus ancien et le plus universel.
      strong C'est ce que TiboFlux supporte actuellement.

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Symboles de base

    div(class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6")
      .bg-indigo-50.rounded-lg.p-4.text-center
        .mb-2
          svg(width="120" height="60" class="mx-auto")
            rect(x="10" y="10" width="100" height="40" rx="20" fill="#e0e7ff" stroke="#4f46e5" stroke-width="2")
            text(x="60" y="35" text-anchor="middle" font-size="12" fill="#4f46e5") Terminal
        .text-sm.font-medium.text-indigo-700 TERMINAL
        .text-xs.text-gray-600 D√©but / Fin
        code.bg-indigo-100.px-2.py-1.rounded.text-xs.mt-2.inline-block [Texte]

      .bg-blue-50.rounded-lg.p-4.text-center
        .mb-2
          svg(width="120" height="60" class="mx-auto")
            rect(x="10" y="10" width="100" height="40" fill="#dbeafe" stroke="#2563eb" stroke-width="2")
            text(x="60" y="35" text-anchor="middle" font-size="12" fill="#2563eb") Process
        .text-sm.font-medium.text-blue-700 PROCESS
        .text-xs.text-gray-600 Action / Traitement
        code.bg-blue-100.px-2.py-1.rounded.text-xs.mt-2.inline-block {Texte}

      .bg-amber-50.rounded-lg.p-4.text-center
        .mb-2
          svg(width="120" height="60" class="mx-auto")
            polygon(points="60,5 115,30 60,55 5,30" fill="#fef3c7" stroke="#d97706" stroke-width="2")
            text(x="60" y="35" text-anchor="middle" font-size="11" fill="#d97706") Decision
        .text-sm.font-medium.text-amber-700 DECISION
        .text-xs.text-gray-600 Condition / Branchement
        code.bg-amber-100.px-2.py-1.rounded.text-xs.mt-2.inline-block &lt;Texte?&gt;

      .bg-green-50.rounded-lg.p-4.text-center
        .mb-2
          svg(width="120" height="60" class="mx-auto")
            polygon(points="25,10 110,10 95,50 10,50" fill="#d1fae5" stroke="#059669" stroke-width="2")
            text(x="60" y="35" text-anchor="middle" font-size="12" fill="#059669") I/O
        .text-sm.font-medium.text-green-700 I/O
        .text-xs.text-gray-600 Entr√©e / Sortie
        code.bg-green-100.px-2.py-1.rounded.text-xs.mt-2.inline-block (Texte)

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Quand l'utiliser ?
    ul.list-none.space-y-2.mb-6
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Expliquer un algorithme √† des d√©butants
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Documenter un processus simple (&lt; 10 √©tapes)
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Communication avec des non-techniciens
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Prise de d√©cision avec peu de branches

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Exemple TiboFlux
    pre.bg-gray-900.text-green-400.p-4.rounded.text-sm.overflow-x-auto
      | flow "Validation d'un document"
      |
      | [R√©ception document] -> {V√©rifier compl√©tude}
      |
      | {V√©rifier compl√©tude} -> &lt;Complet?&gt;
      |
      | &lt;Complet?&gt;
      |   | oui -> {Analyser contenu} -> [Archiver]
      |   | non -> {Demander compl√©ments} -> [R√©ception document]

  //- Section UML Activity
  #uml.bg-white.rounded-lg.shadow-md.p-6.mb-8
    .flex.items-center.gap-3.mb-4
      .text-3xl üîÑ
      h2.text-2xl.font-bold.text-purple-600 2. UML Activity Diagram

    p.text-gray-600.mb-4
      strong Unified Modeling Language
      | - standard pour la mod√©lisation logicielle.

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Symboles sp√©cifiques (en plus des flowcharts)

    div(class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6")
      .bg-purple-50.rounded-lg.p-4
        .flex.items-center.gap-4
          svg(width="40" height="40")
            circle(cx="20" cy="20" r="12" fill="#7c3aed")
          div
            .font-medium.text-purple-700 N≈ìud initial
            .text-sm.text-gray-600 Point de d√©part (cercle noir plein)

      .bg-purple-50.rounded-lg.p-4
        .flex.items-center.gap-4
          svg(width="40" height="40")
            circle(cx="20" cy="20" r="14" fill="none" stroke="#7c3aed" stroke-width="3")
            circle(cx="20" cy="20" r="8" fill="#7c3aed")
          div
            .font-medium.text-purple-700 N≈ìud final
            .text-sm.text-gray-600 Point d'arriv√©e (cercle avec anneau)

      .bg-purple-50.rounded-lg.p-4
        .flex.items-center.gap-4
          svg(width="80" height="40")
            rect(x="5" y="15" width="70" height="10" fill="#7c3aed" rx="2")
          div
            .font-medium.text-purple-700 Barre de synchronisation
            .text-sm.text-gray-600 Fork/Join - Actions en parall√®le

      .bg-purple-50.rounded-lg.p-4
        .flex.items-center.gap-4
          svg(width="80" height="40")
            rect(x="5" y="5" width="25" height="30" fill="none" stroke="#7c3aed" stroke-width="2")
            rect(x="30" y="5" width="25" height="30" fill="none" stroke="#7c3aed" stroke-width="2")
            rect(x="55" y="5" width="20" height="30" fill="none" stroke="#7c3aed" stroke-width="2")
          div
            .font-medium.text-purple-700 Swimlanes (couloirs)
            .text-sm.text-gray-600 Qui fait quoi - Acteurs en colonnes

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Quand l'utiliser ?
    ul.list-none.space-y-2.mb-6
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Montrer qui fait quoi (swimlanes)
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Processus avec actions parall√®les
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Documentation technique pour d√©veloppeurs
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span D√©crire un cas d'utilisation d√©taill√©

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Exemple conceptuel
    .bg-gray-100.rounded-lg.p-4.font-mono.text-sm.overflow-x-auto
      pre.text-gray-700
        | ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        | ‚îÇ  Demandeur  ‚îÇ  Service RH ‚îÇ  Direction  ‚îÇ
        | ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
        | ‚îÇ             ‚îÇ             ‚îÇ             ‚îÇ
        | ‚îÇ  ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
        | ‚îÇ  ‚îÇ          ‚îÇ             ‚îÇ             ‚îÇ
        | ‚îÇ  ‚ñº          ‚îÇ             ‚îÇ             ‚îÇ
        | ‚îÇ {Soumettre} ‚îÇ             ‚îÇ             ‚îÇ
        | ‚îÇ  ‚îÇ          ‚îÇ             ‚îÇ             ‚îÇ
        | ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∂{V√©rifier}‚îÇ             ‚îÇ
        | ‚îÇ             ‚îÇ      ‚îÇ      ‚îÇ             ‚îÇ
        | ‚îÇ             ‚îÇ      ‚ñº      ‚îÇ             ‚îÇ
        | ‚îÇ             ‚îÇ  &lt;Valide?&gt;  ‚îÇ             ‚îÇ
        | ‚îÇ             ‚îÇ   ‚îÇ     ‚îÇ   ‚îÇ             ‚îÇ
        | ‚îÇ             ‚îÇ  oui   non  ‚îÇ             ‚îÇ
        | ‚îÇ             ‚îÇ   ‚îÇ     ‚îÇ   ‚îÇ             ‚îÇ
        | ‚îÇ             ‚îÇ   ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∂{D√©cider} ‚îÇ
        | ‚îÇ             ‚îÇ   ‚ñº         ‚îÇ      ‚îÇ      ‚îÇ
        | ‚îÇ             ‚îÇ  ‚óâ          ‚îÇ      ‚ñº      ‚îÇ
        | ‚îÇ             ‚îÇ             ‚îÇ      ‚óâ      ‚îÇ
        | ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

    .bg-yellow-50.border-l-4.border-yellow-400.p-4.mt-4
      p.text-yellow-800
        strong.text-yellow-900 √Ä venir dans TiboFlux :
        | Les swimlanes seront ajout√©s dans le Module 5 du parcours d'apprentissage.

  //- Section Swimlanes (d√©taill√©e)
  #swimlanes.bg-white.rounded-lg.shadow-md.p-6.mb-8
    .flex.items-center.gap-3.mb-4
      .text-3xl üèä
      h2.text-2xl.font-bold.text-cyan-600 Focus : Les Swimlanes (couloirs de nage)

    p.text-gray-600.mb-4
      | Les swimlanes (litt√©ralement "couloirs de piscine") sont une technique de visualisation qui montre
      strong qui fait quoi
      | dans un processus. Chaque acteur a son propre "couloir" vertical ou horizontal.

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Pourquoi utiliser les swimlanes ?

    div(class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6")
      .bg-cyan-50.rounded-lg.p-4
        h4.font-medium.text-cyan-700.mb-2 Avantages
        ul.list-none.space-y-2
          li.flex.items-center.gap-2
            span.text-green-500 ‚úì
            span Clarifie les responsabilit√©s
          li.flex.items-center.gap-2
            span.text-green-500 ‚úì
            span Identifie les transferts entre acteurs
          li.flex.items-center.gap-2
            span.text-green-500 ‚úì
            span D√©tecte les goulots d'√©tranglement
          li.flex.items-center.gap-2
            span.text-green-500 ‚úì
            span Facilite la documentation de passation

      .bg-red-50.rounded-lg.p-4
        h4.font-medium.text-red-700.mb-2 Inconv√©nients
        ul.list-none.space-y-2
          li.flex.items-center.gap-2
            span.text-red-500 ‚úó
            span Plus complexe qu'un flowchart simple
          li.flex.items-center.gap-2
            span.text-red-500 ‚úó
            span Prend plus de place
          li.flex.items-center.gap-2
            span.text-red-500 ‚úó
            span Peut devenir illisible avec trop d'acteurs

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Structure d'un diagramme swimlane

    .bg-gray-100.rounded-lg.p-4.mb-6
      p.text-gray-700.mb-3
        | Un diagramme swimlane se compose de :
      ol.list-decimal.list-inside.space-y-2.text-gray-600
        li
          strong.text-gray-800 En-t√™te :
          | nom de chaque acteur (personne, service, syst√®me)
        li
          strong.text-gray-800 Colonnes/lignes :
          | un couloir par acteur
        li
          strong.text-gray-800 Actions :
          | les √©tapes du processus, plac√©es dans le couloir de l'acteur responsable
        li
          strong.text-gray-800 Fl√®ches :
          | montrent le flux, notamment les passages d'un acteur √† l'autre

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Exemple concret : Inscription sur un portail

    p.text-gray-600.mb-3
      | Prenons l'exemple d'un processus d'inscription avec 4 acteurs :
      strong Utilisateur
      | ,
      strong Portail
      | ,
      strong Admin
      | et
      strong Base de donn√©es
      | .

    .bg-gray-100.rounded-lg.p-4.font-mono.text-sm.overflow-x-auto.mb-4
      pre.text-gray-700
        | ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        | ‚îÇ Utilisateur  ‚îÇ   Portail    ‚îÇ    Admin     ‚îÇ     BDD      ‚îÇ
        | ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
        | ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
        | ‚îÇ  ‚îÇ           ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  ‚ñº           ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ {Remplir     ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  formulaire} ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  ‚îÇ           ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚ñ∂{Valider    ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ              ‚îÇ   format}    ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ              ‚îÇ      ‚îÇ       ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ              ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚ñ∂{Cr√©er      ‚îÇ
        | ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ   compte}    ‚îÇ
        | ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ      ‚îÇ       ‚îÇ
        | ‚îÇ              ‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
        | ‚îÇ              ‚îÇ      ‚ñº       ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ              ‚îÇ {Envoyer     ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ              ‚îÇ  email}      ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ              ‚îÇ      ‚îÇ       ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  ‚ñº           ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ {Recevoir    ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  email}      ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  ‚îÇ           ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  ‚ñº           ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îÇ  ‚óâ           ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
        | ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Cas d'usage typiques

    div(class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6")
      .bg-white.border.rounded-lg.p-4
        h4.font-medium.text-gray-700.mb-2 Documentation de passation
        p.text-sm.text-gray-600 Id√©al pour expliquer √† un nouveau prestataire comment fonctionne un processus et qui intervient √† chaque √©tape.
      .bg-white.border.rounded-lg.p-4
        h4.font-medium.text-gray-700.mb-2 Analyse de processus existant
        p.text-sm.text-gray-600 Permet de visualiser les allers-retours inutiles entre acteurs et d'optimiser le workflow.
      .bg-white.border.rounded-lg.p-4
        h4.font-medium.text-gray-700.mb-2 Formation des nouveaux
        p.text-sm.text-gray-600 Un nouveau coll√®gue comprend imm√©diatement son r√¥le et ses interactions avec les autres acteurs.
      .bg-white.border.rounded-lg.p-4
        h4.font-medium.text-gray-700.mb-2 Cahier des charges
        p.text-sm.text-gray-600 Pour sp√©cifier un syst√®me, les swimlanes montrent clairement ce que fait le syst√®me vs l'utilisateur.

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Syntaxe TiboFlux pr√©vue

    .bg-gray-900.rounded-lg.p-4.mb-4
      pre.text-green-400.text-sm.overflow-x-auto
        | # D√©claration des acteurs
        | actors "Utilisateur", "Portail", "Admin", "BDD"
        |
        | flow "Inscription"
        |
        | [D√©but]
        |   @Utilisateur
        |
        | [D√©but] -> {Remplir formulaire}
        |   @Utilisateur
        |
        | {Remplir formulaire} -> {Valider format}
        |   @Portail
        |
        | {Valider format} -> {Cr√©er compte}
        |   @BDD
        |
        | {Cr√©er compte} -> {Envoyer email}
        |   @Portail
        |
        | {Envoyer email} -> {Recevoir email}
        |   @Utilisateur
        |
        | {Recevoir email} -> [Fin]
        |   @Utilisateur

    .bg-cyan-50.border-l-4.border-cyan-400.p-4.mt-4
      p.text-cyan-800
        strong.text-cyan-900 Syntaxe expliqu√©e :
      ul.list-disc.list-inside.text-sm.text-cyan-700.mt-2.space-y-1
        li
          code.bg-cyan-100.px-1.rounded actors "A", "B", "C"
          | : d√©clare les acteurs (colonnes)
        li
          code.bg-cyan-100.px-1.rounded @NomActeur
          | : assigne un n≈ìud √† un acteur (apr√®s la ligne du n≈ìud)
        li Les n≈ìuds sans @Acteur seront plac√©s automatiquement

    .bg-yellow-50.border-l-4.border-yellow-400.p-4.mt-4
      p.text-yellow-800
        strong.text-yellow-900 Statut :
        | Cette fonctionnalit√© est en cours de d√©veloppement. Tu peux l'essayer bient√¥t !

  //- Section BPMN
  #bpmn.bg-white.rounded-lg.shadow-md.p-6.mb-8
    .flex.items-center.gap-3.mb-4
      .text-3xl ‚öôÔ∏è
      h2.text-2xl.font-bold.text-amber-600 3. BPMN (Business Process Model and Notation)

    p.text-gray-600.mb-4
      | Standard
      strong OMG
      | pour les processus m√©tier - tr√®s utilis√© en entreprise.

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Symboles sp√©cifiques

    div(class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6")
      .bg-amber-50.rounded-lg.p-4
        h4.font-medium.text-amber-700.mb-2 Events (√âv√©nements)
        .space-y-2
          .flex.items-center.gap-3
            svg(width="30" height="30")
              circle(cx="15" cy="15" r="12" fill="none" stroke="#d97706" stroke-width="2")
            span.text-sm Start Event (d√©but)
          .flex.items-center.gap-3
            svg(width="30" height="30")
              circle(cx="15" cy="15" r="12" fill="none" stroke="#d97706" stroke-width="4")
            span.text-sm End Event (fin)
          .flex.items-center.gap-3
            svg(width="30" height="30")
              circle(cx="15" cy="15" r="12" fill="none" stroke="#d97706" stroke-width="2")
              circle(cx="15" cy="15" r="8" fill="none" stroke="#d97706" stroke-width="2")
            span.text-sm Intermediate Event

      .bg-amber-50.rounded-lg.p-4
        h4.font-medium.text-amber-700.mb-2 Gateways (Portes)
        .space-y-2
          .flex.items-center.gap-3
            svg(width="30" height="30")
              polygon(points="15,2 28,15 15,28 2,15" fill="none" stroke="#d97706" stroke-width="2")
            span.text-sm XOR - Un seul chemin
          .flex.items-center.gap-3
            svg(width="30" height="30")
              polygon(points="15,2 28,15 15,28 2,15" fill="none" stroke="#d97706" stroke-width="2")
              text(x="15" y="19" text-anchor="middle" font-size="14" fill="#d97706") +
            span.text-sm AND - Tous les chemins
          .flex.items-center.gap-3
            svg(width="30" height="30")
              polygon(points="15,2 28,15 15,28 2,15" fill="none" stroke="#d97706" stroke-width="2")
              circle(cx="15" cy="15" r="5" fill="none" stroke="#d97706" stroke-width="2")
            span.text-sm OR - Un ou plusieurs

      .bg-amber-50.rounded-lg.p-4
        h4.font-medium.text-amber-700.mb-2 Tasks (T√¢ches)
        .space-y-2
          .flex.items-center.gap-3
            svg(width="50" height="30")
              rect(x="2" y="2" width="46" height="26" rx="5" fill="none" stroke="#d97706" stroke-width="2")
            span.text-sm Task (rectangle arrondi)
          .flex.items-center.gap-3
            span.text-lg üë§
            span.text-sm User Task
          .flex.items-center.gap-3
            span.text-lg ‚öôÔ∏è
            span.text-sm Service Task
          .flex.items-center.gap-3
            span.text-lg üìú
            span.text-sm Script Task

    h3.text-lg.font-semibold.text-gray-800.mt-6.mb-3 Quand l'utiliser ?
    ul.list-none.space-y-2.mb-6
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Processus m√©tier complexes (RH, Finance, Qualit√©)
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Interactions entre plusieurs services/syst√®mes
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Documentation pour certification (ISO, etc.)
      li.flex.items-center.gap-2
        span.text-green-500 ‚úì
        span Automatisation de workflows (outils BPM)

    .bg-yellow-50.border-l-4.border-yellow-400.p-4.mt-4
      p.text-yellow-800
        strong.text-yellow-900 √Ä venir dans TiboFlux :
        | Les √©l√©ments BPMN (events, gateways) seront ajout√©s progressivement dans le Module 5.

  //- Tableau comparatif
  #comparatif.bg-white.rounded-lg.shadow-md.p-6.mb-8
    h2.text-2xl.font-bold.text-gray-800.mb-4 Tableau comparatif : Quand utiliser quoi ?

    .overflow-x-auto
      table.w-full.text-sm
        thead.bg-gray-100
          tr
            th.p-3.text-left Situation
            th.p-3.text-center Flowchart
            th.p-3.text-center UML Activity
            th.p-3.text-center BPMN
        tbody
          tr.border-b
            td.p-3 Expliquer √† un coll√®gue non-tech
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì
            td.p-3.text-center
              span.text-green-500 ‚úì
            td.p-3.text-center
              span.text-red-500 ‚úó
          tr.border-b
            td.p-3 Algorithme de code
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì
            td.p-3.text-center
              span.text-red-500 ‚úó
          tr.border-b
            td.p-3 Processus simple (&lt; 10 √©tapes)
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì
            td.p-3.text-center
              span.text-green-500 ‚úì
          tr.border-b
            td.p-3 Montrer "qui fait quoi"
            td.p-3.text-center
              span.text-red-500 ‚úó
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì
          tr.border-b
            td.p-3 Actions en parall√®le
            td.p-3.text-center
              span.text-red-500 ‚úó
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì
          tr.border-b
            td.p-3 Processus m√©tier complexe
            td.p-3.text-center
              span.text-red-500 ‚úó
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì
          tr.border-b
            td.p-3 Documentation ISO/certification
            td.p-3.text-center
              span.text-red-500 ‚úó
            td.p-3.text-center
              span.text-green-500 ‚úì
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì
          tr
            td.p-3 Automatisation workflow
            td.p-3.text-center
              span.text-red-500 ‚úó
            td.p-3.text-center
              span.text-red-500 ‚úó
            td.p-3.text-center
              span.text-green-500 ‚úì‚úì‚úì

  //- Support TiboFlux
  #tiboflux.bg-white.rounded-lg.shadow-md.p-6.mb-8
    h2.text-2xl.font-bold.text-gray-800.mb-4 Ce que TiboFlux supporte aujourd'hui

    .overflow-x-auto
      table.w-full.text-sm
        thead.bg-gray-100
          tr
            th.p-3.text-left √âl√©ment
            th.p-3.text-center Support√©
            th.p-3.text-left Syntaxe
        tbody
          tr.border-b.bg-green-50
            td.p-3 Terminal (d√©but/fin)
            td.p-3.text-center
              span.text-green-500.text-lg ‚úì
            td.p-3
              code.bg-gray-200.px-2.py-1.rounded [Texte]
          tr.border-b.bg-green-50
            td.p-3 Process (action)
            td.p-3.text-center
              span.text-green-500.text-lg ‚úì
            td.p-3
              code.bg-gray-200.px-2.py-1.rounded {Texte}
          tr.border-b.bg-green-50
            td.p-3 Decision (condition)
            td.p-3.text-center
              span.text-green-500.text-lg ‚úì
            td.p-3
              code.bg-gray-200.px-2.py-1.rounded &lt;Texte?&gt;
          tr.border-b.bg-green-50
            td.p-3 I/O (entr√©e/sortie)
            td.p-3.text-center
              span.text-green-500.text-lg ‚úì
            td.p-3
              code.bg-gray-200.px-2.py-1.rounded (Texte)
          tr.border-b.bg-green-50
            td.p-3 Connexions avec labels
            td.p-3.text-center
              span.text-green-500.text-lg ‚úì
            td.p-3
              code.bg-gray-200.px-2.py-1.rounded -> "label" ->
          tr.border-b.bg-green-50
            td.p-3 Branches conditionnelles
            td.p-3.text-center
              span.text-green-500.text-lg ‚úì
            td.p-3
              code.bg-gray-200.px-2.py-1.rounded | oui -> ...
          tr.border-b.bg-gray-50
            td.p-3.text-gray-500 Swimlanes
            td.p-3.text-center
              span.text-gray-400.text-lg ‚úó
            td.p-3.text-gray-500 √Ä venir (Module 5)
          tr.border-b.bg-gray-50
            td.p-3.text-gray-500 Fork/Join (parall√®le)
            td.p-3.text-center
              span.text-gray-400.text-lg ‚úó
            td.p-3.text-gray-500 √Ä venir
          tr.border-b.bg-gray-50
            td.p-3.text-gray-500 Events BPMN
            td.p-3.text-center
              span.text-gray-400.text-lg ‚úó
            td.p-3.text-gray-500 √Ä venir
          tr.bg-gray-50
            td.p-3.text-gray-500 Gateways BPMN
            td.p-3.text-center
              span.text-gray-400.text-lg ‚úó
            td.p-3.text-gray-500 √Ä venir

  //- Section Outils de debug
  #debug.bg-white.rounded-lg.shadow-md.p-6.mb-8
    .flex.items-center.gap-3.mb-4
      .text-3xl üîß
      h2.text-2xl.font-bold.text-gray-800 Outils de debug

    p.text-gray-600.mb-4
      | Testez votre code TiboFlux et visualisez les √©tapes internes du parsing :
      strong tokens
      | (lexer) et
      strong AST
      | (parser).

    .mb-4
      label.block.text-sm.font-medium.text-gray-700.mb-2 Code TiboFlux
      textarea#debug-code(class="w-full h-32 bg-gray-900 text-green-400 p-4 rounded font-mono text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="# Tapez votre code TiboFlux ici...")
        | flow "Test"
        | [D√©but] -> {Action} -> [Fin]

    .flex.gap-2.mb-4
      button#btn-debug-parse(class="bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-800 transition")
        | Analyser (Tokens + AST)
      button#btn-debug-render(class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition")
        | G√©n√©rer SVG

    div(class="grid grid-cols-1 lg:grid-cols-2 gap-4")
      div
        .bg-gray-200.px-3.py-1.text-sm.rounded-t.font-semibold Tokens (Lexer)
        pre#debug-tokens.bg-gray-900.text-gray-300.p-3.rounded-b.h-64.overflow-auto.text-xs.font-mono
          | Cliquez sur "Analyser" pour voir les tokens...

      div
        .bg-gray-200.px-3.py-1.text-sm.rounded-t.font-semibold AST (Parser)
        pre#debug-ast.bg-gray-900.text-gray-300.p-3.rounded-b.h-64.overflow-auto.text-xs.font-mono
          | Cliquez sur "Analyser" pour voir l'AST...

    .mt-4
      .bg-gray-200.px-3.py-1.text-sm.rounded-t.font-semibold.flex.justify-between
        span Aper√ßu SVG
        span#debug-status.text-xs.text-gray-500 Pr√™t
      #debug-preview(class="bg-white border border-gray-300 rounded-b p-4 min-h-[200px] flex items-center justify-center")
        p.text-gray-400 Cliquez sur "G√©n√©rer SVG" pour voir l'aper√ßu

  //- Call to action
  .text-center
    a(class="bg-indigo-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-indigo-700 transition" href="/editor")
      | Pratiquer dans l'√©diteur

block scripts
  script.
    const debugCode = document.getElementById('debug-code');
    const debugTokens = document.getElementById('debug-tokens');
    const debugAst = document.getElementById('debug-ast');
    const debugPreview = document.getElementById('debug-preview');
    const debugStatus = document.getElementById('debug-status');

    // Analyser (tokens + AST)
    document.getElementById('btn-debug-parse').addEventListener('click', async () => {
      try {
        debugStatus.textContent = 'Analyse...';
        debugStatus.className = 'text-xs text-yellow-600';

        // Appel API pour parser
        const response = await fetch('/api/parse', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ code: debugCode.value, includeTokens: true })
        });
        const data = await response.json();

        if (data.success) {
          // Afficher les tokens
          if (data.tokens) {
            debugTokens.innerHTML = data.tokens.map((t, i) =>
              `<span style="color:#22c55e">${String(i).padStart(3, '0')}</span> ` +
              `<span style="color:#60a5fa">${t.type.padEnd(12)}</span> ` +
              `<span style="color:#fbbf24">"${t.value}"</span>` +
              `<span style="color:#9ca3af"> (L${t.line}:${t.column})</span>`
            ).join('\n');
          } else {
            debugTokens.innerHTML = '<span style="color:#9ca3af">Tokens non disponibles (API √† mettre √† jour)</span>';
          }

          // Afficher l'AST
          debugAst.innerHTML = syntaxHighlightJson(JSON.stringify(data.ast, null, 2));

          debugStatus.textContent = 'Analys√©';
          debugStatus.className = 'text-xs text-green-600';
        } else {
          throw new Error(data.error);
        }
      } catch (error) {
        debugTokens.innerHTML = `<span style="color:#ef4444">Erreur: ${error.message}</span>`;
        debugAst.innerHTML = '';
        debugStatus.textContent = 'Erreur';
        debugStatus.className = 'text-xs text-red-600';
      }
    });

    // G√©n√©rer SVG
    document.getElementById('btn-debug-render').addEventListener('click', async () => {
      try {
        debugStatus.textContent = 'G√©n√©ration...';
        debugStatus.className = 'text-xs text-yellow-600';

        const response = await fetch('/api/render', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ code: debugCode.value })
        });
        const data = await response.json();

        if (data.success) {
          debugPreview.innerHTML = data.svg;
          debugStatus.textContent = 'OK';
          debugStatus.className = 'text-xs text-green-600';
        } else {
          throw new Error(data.error);
        }
      } catch (error) {
        debugPreview.innerHTML = `<p class="text-red-500">Erreur: ${error.message}</p>`;
        debugStatus.textContent = 'Erreur';
        debugStatus.className = 'text-xs text-red-600';
      }
    });

    // Coloration syntaxique JSON
    function syntaxHighlightJson(json) {
      return json
        .replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')
        .replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?)/g, (match) => {
          let cls = 'color:#fbbf24'; // string
          if (/:$/.test(match)) {
            cls = 'color:#60a5fa'; // key
          }
          return `<span style="${cls}">${match}</span>`;
        })
        .replace(/\b(true|false)\b/g, '<span style="color:#f472b6">$1</span>')
        .replace(/\b(null)\b/g, '<span style="color:#9ca3af">$1</span>')
        .replace(/\b(\d+)\b/g, '<span style="color:#34d399">$1</span>');
    }
